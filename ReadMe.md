# hit - Инструмент для бенчмаркинга HTTP

`hit` - простой инструмент для бенчмаркинга HTTP, написанный на Go, который позволяет отправлять множественные запросы на указанный URL с настраиваемой степенью параллелизма и ограничением скорости.

## Структура проекта

```
hit/
├── cmd/
│   └── hit/
│       ├── hit.go        # Основная логика приложения
│       ├── flags.go      # Парсинг и валидация флагов командной строки
│       └── hit_test.go   # Тесты для основного приложения
├── hit/
│   ├── client.go       # Реализация HTTP-клиента для отправки запросов
│   ├── client_test.go  # Тесты для клиента
│   ├── pipe.go         # Утилиты для обработки конвейера запросов
│   ├── request.go      # Утилиты для обработки запросов
│   └── result.go       # Агрегирование и форматирование результатов
└──  go.mod              # Определение модуля Go
```

## Возможности

- Отправка настраиваемого количества HTTP-запросов на целевой URL
- Установка уровня параллелизма для параллельного выполнения запросов
- Ограничение скорости запросов в секунду (RPS)
- Поддержка методов GET, POST и PUT
- Подробная статистика результатов запросов, включая:
  - Запросы в секунду (RPS)
  - Процент успешных запросов
  - Общее количество запросов и ошибок
  - Количество полученных байт
  - Статистику по длительности (самый быстрый, самый медленный, средний)
  - Коды статуса HTTP

## Установка

```bash
  # Клонируем репозиторий
  git clone https://github.com/yourusername/hit.git

  cd hit

  # Собираем приложение
  go build -o hit ./cmd/hit
```

## Примеры использования

### Базовое использование

Отправка 100 запросов с уровнем параллелизма по умолчанию (количество ядер процессора):
```bash
  ./hit http://example.com
```

### Количество запросов и параллелизм

Отправка 1000 запросов с уровнем параллелизма 10:
```bash
  ./hit -n 1000 -c 10 http://example.com
```

### Ограничение скорости

Отправка запросов с ограничением в 5 запросов в секунду:
```bash
  ./hit -n 100 -t 5 http://example.com
```

### Разные HTTP-методы

Использование метода POST вместо метода GET по умолчанию:
```bash
  ./hit -m POST http://example.com/api
```

### Комбинированные параметры

Отправка 500 запросов с 20 параллельными соединениями и ограничением в 10 RPS:
```bash
  ./hit -n 500 -c 20 -t 10 http://example.com
```

## Вывод

Инструмент отображает баннер и подробную статистику:

```
 __  __     __     ______
/\ \_\ \   /\ \   /\__  _\
\ \  __ \  \ \ \  \/_/\ \/
 \ \_\ \_\  \ \_\    \ \_\
  \/_/\/_/   \/_/     \/_/

Making 100 requests to http://example.com with a concurrency level of 8.

Summary:
	Success         : 100%
	RPS             : 45.2
	Requests        : 100
	Errors          : 0
	Bytes           : 12540
	Duration        : 2.21s
	Fastest         : 45.2ms
	Slowest         : 189.7ms
```

## Конфигурационные параметры

| Параметр | По умолчанию | Описание |
|--------|---------|-------------|
| `-n` | 100 | Количество запросов |
| `-c` | Количество ядер процессора | Уровень параллелизма |
| `-t` | 0 (без ограничений) | Ограничение запросов в секунду |
| `-d` | 5s | Время ожидания |
| `-m` | GET | HTTP-метод (GET, POST, PUT) |

## Требования

- Go 1.19 или выше
- Unix-подобная операционная система (Linux, macOS и т.д.)
